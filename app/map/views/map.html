<div ng-controller="MapController" class="map">

    <div class="col-xs-8 col-sm-8">
        <div class="legend">
            <ul class="legend-list list-unstyled list-inline">
                <li ng-repeat="item in legend" class="legend-item">
                    <img class="legend-img" ng-src="{{item.img}}"/>
                    <span class="legend-text">{{item.text}}</span>
                </li>
            </ul>
        </div>

        <ui-gmap-google-map 
        center="map.center" 
        zoom="map.zoom" 
        events="map.events" 
        options="map.options"
        id="map-canvas">
            Loading map...
            <ui-gmap-markers 
            models="markers"
            idkey="'idKey'" 
            coords="'coords'"
            icon="'icon'"
            options="'options'"
            events="markerEvents"
            click="onMarkerClick"
            control="markersControl"></ui-gmap-markers>

            <ui-gmap-window 
            show="map.showWindow"
            isIconVisibleOnClick="false"
            options="infoWindow.options"
            coords="infoWindow.model.coords">
                <div>
                    <span ng-bind="map.showWindow"></span>
                    <div ng-show="{{infoWindow.model.cafe}}">
                        <h3>
                            <a ng-href="#cafe/{{infoWindow.model.cafe.id}}">{{infoWindow.model.cafe.name}}</a>
                        </h3>
                        <span>{{infoWindow.model.cafe.location.address}}</span>
                    </div>
                    <div ng-show="{{!infoWindow.model.cafe}}">
                        <h3>You are here!</h3>
                        <p>Drag me to seach for cafes in other areas.</p>
                    </div>
                </div>
            </ui-gmap-window>
        </ui-gmap-google-map>
    </div>

    <div class="col-xs-4 col-sm-4 cafes">
        <div class="cafe-numbers">
            <span ng-bind="cafes.length"></span>
            Cafes around you

            <small ng-show="loadingCafes">Loading &hellip;</small>
        </div>
        <div class="cafe-list">
            <ul class="list-unstyled">
                <li ng-mouseover="mouseoverMarker(cafe.idKey)" ng-mouseleave="mouseoutMarker(cafe.idKey)"  ng-class="{cafe: true}" ng-repeat="cafe in cafes">
                    <span ng-class="{closed: cafe.venue.hours && !cafe.venue.hours.isOpen}">
                        <a ng-class="{hover: cafe.idKey == currMarkerHover}" ng-href="#cafe/{{cafe.venue.id}}">{{cafe.venue.name}}</a>
                    </span>

                </li>
            </ul>
        </div>
    </div>
</div>